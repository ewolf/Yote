yote={init:function(){throw new Error("yote_local not yet loaded")}},yote_local=yote,yote_local.init=function(){function a(a){if(null===a||void 0===a)return void 0;if("object"==typeof a){if(i[a.id]!==a)throw new Error("Tried to set a non-yote object");return a.id}return"v"+a}function b(a){if(isNaN(a))return console.warn("arrayInt cannot make '"+a+"' into int, using 0"),0;var b=parseInt(a);return parseFloat(a)!==b&&console.warn("arrayInt converting "+a+" to "+b),b}function c(){var a;(a=l)&&(l={});var b=[];for(var c in a){var d=a[c];b.push([d.id,d._data,d._stamps])}JSON.stringify(b)}function d(a,b){l[a]=b,localStorage.setItem("yote_id_"+a,JSON.stringify({s:b._stamps,d:b._data})),window.clearTimeout(k)&&!1||k=window.setTimeout(c,6e4)}function e(b,c){a(c),c._stamps.push(b);var d=j[b];return d?d(c):console.warn("No stamp function for '"+b+"'"),c}function f(b){var c={id:b,_data:{},_stamps:[],add_to:function(b,c){var e=this.get(b);if(e&&!e.push)throw new Error("Tried to add to a non-array");e||(e=yote_local.newlist(),this.set(b,e)),c=Array.isArray(c)?c:c?[c]:[];for(var f=0,g=c.length;g>f;f++)e._data.push(a(c[f]));return c.length>0&&(d(e.id,e),e.fireAllUpdateListeners("add_to",this,b,c)),e._data.length},remove_from:function(b,c){var e,f=this.get(b);if(f&&!f.splice)return void console.warn("Tried to remove from a non existant list");var g=f._data,h=0;c=Array.isArray(c)?c:c?[c]:[];for(var i=0,j=c.length;j>i;i++)for(var k=a(c[i]),e=0,l=g.length;l>e;e++)g[e]===k&&(g.splice(e,1),h++);return h>0&&(d(f.id,f),f.fireAllUpdateListeners("remove_from",this,b,c)),h},get:function(a,b){var c=this._data[a];return void 0===c&&void 0!==b?("function"==typeof b&&(b=b()),this.set(a,b),b):"string"==typeof c&&c.startsWith("v")?c.substring(1):(c=parseInt(c),c>0?g(c):void 0)},set:function(b,c){var e=this.get(b);return this._data[b]=a(c),c!==e&&(d(this.id,this),this.fireAllUpdateListeners("set",b,c)),c},update:function(b){var c,e;if(Array.isArray(b))for(var f=0,g=b.length;g>f;f++){var h=b[f];for(c in h)e=h[c],this._data[c]=a(e)}else for(c in b)e=b[c],this._data[c]=a(e);return this.fireAllUpdateListeners("update",b),d(this.id,this),this},_listeners:{},addUpdateListener:function(a,b){b=b||"_",this._listeners[b]=a},fireAllUpdateListeners:function(){var a;for(a in this._listeners)this._listeners[a](this,arguments)},fireUpdateListener:function(a,b){var c=this._listeners[a];c?c(this,b):console.warn("No listeners for '"+a+"'")}};return b&&(i[b]=c),c}function g(a){var b,c,d=i[a];if(!d){var g=localStorage.getItem("yote_id_"+a);if(g){for(g=JSON.parse(g),d=f(a),c=g.s.length,d._data=g.d,i[a]=d,b=0;c>b;b++)e(g.s[b],d);return d}}return d}var h,i,j;i={};var k,l={};return j={_list_container:function(a){a._list_container_stamp_names={},a.calculate=function(){},a.remove_entry=function(a){var b=a[0],c=a[1];this.remove_from(b,c),this.calculate("removed_entry")},a.old_add_to=a.add_to,a.old_remove_from=a.remove_from,a.add_to=function(a,b){var c=this.old_add_to(a,b);return this.calculate(),c},a.remove_from=function(a,b){var c=this.old_remove_from(a,b);return this.calculate(),c},a.add_entry=function(a){var b=a[0],c=a[1];c||(c=h.newobj(this._list_container_stamp_names[b]||"_list_container"));var d=this.add_to(b,c);return c.get("name","item "+d),c.set("parent",this),c.calculate("added_to_list"),this.calculate("new_entry"),c}},_list:function(c){return Array.isArray(c._data)||(c._data=[]),c.toArray=function(){for(var a=[],b=0,c=this.length();c>b;b++)a.push(this.get(b));return a},c.each=function(a){for(var b=0,c=this.length();c>b;b++){var d=this.get(b);a(d,b)}return this},c.length=function(){return c._data.length},c.sort=function(a){var b=c._data.sort(a);return this.fireAllUpdateListeners("sort"),d(this.id,this),b},c.push=function(){for(var b=c._data,e=1===arguments.length&&Array.isArray(arguments[0])?arguments[0]:arguments,f=0,g=e.length;g>f;f++)b.push(a(e[f]));return this.fireAllUpdateListeners("push"),d(this.id,this),b.length},c.splice=function(){var b=arguments[0],e=arguments[1],f=[b,e];if(3==arguments.length&&Array.isArray(arguments[2]))for(var g=arguments[2],h=0,i=g.length;i>h;h++)f.push(g[h]);else for(h=2,i=arguments.length;i>h;h++)f.push(a(arguments[h]));var j=c._data.splice.apply(c._data,f);return this.fireAllUpdateListeners("splice"),d(this.id,this),j},c.pop=function(){var a=c._data.pop();return this.fireAllUpdateListeners("pop"),d(this.id,this),a},c.shift=function(){var a=c._data.shift();return this.fireAllUpdateListeners("shift"),d(this.id,this),a},c.unshift=function(){for(var b=c._data,e=1===arguments.length&&Array.isArray(arguments[0])?arguments[0]:arguments,f=0,g=e.length;g>f;f++)b.unshift(a(e[f]));return this.fireAllUpdateListeners("unshift"),d(this.id,this),b.length},c._oldset=c.set,c._oldget=c.get,c.set=function(a,c){return this._oldset(b(a),c)},c.get=function(a,c){return this._oldget(b(a),c)},c},_yote_root:function(b){var c=b;return b.newlist=function(a){return c.newobj("_list",a)},b.newobj=function(b,c){var g;(g=1+(parseInt(localStorage.getItem("yote_maxid"))||0))&&localStorage.setItem("yote_maxid",g);var h=f(g);b=Array.isArray(b)?b:b?[b]:[];for(var i=0,j=b.length;j>i;i++){var k=b[i];if(Array.isArray(k))for(var l=0,m=k.length;m>l;l++)e(k[l],h);else e(k,h)}if("object"==typeof c)for(var n in c){var o=a(c[n]);void 0!==o&&(h._data[n]=o)}return d(g,h),h},b}},yote_local.addToStampers=function(a,b){j[a]=b},yote_local.stowAll=function(){},yote_local.fetch=g,yote_local.fetch_root=function(){return parseInt(localStorage.getItem("yote_maxid"))>0||localStorage.setItem("yote_maxid",1),g(1)||e("_yote_root",f(1))},yote_local.init=function(){return yote_local.fetch_root()},h=yote_local.fetch_root()};
/* {"sources":{"yote_localstorage.js":"73854e8c9425329f8861c48d97d4ca0c"}} */