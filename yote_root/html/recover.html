<!DOCTYPE html>
<html>
<!-- Bootstrappy and meta. This page could replace itself -->
  <head>
    <title>Password Recovery</title>
    <script src="/yote/js/jquery-latest.js"></script>
    <script src="/yote/js/jquery.cookie.js"></script>
    <script src="/yote/js/jquery.base64.min.js"></script>
    <script src="/yote/js/json2.js"></script>

    <script src="/js/main.js"></script>
    <script src="/yote/js/yote.js"></script>
    <script src="/yote/js/yote.util.js"></script>
    <link href="/yote.css" rel="stylesheet" type="text/css" media="all" />
    <link href="/css/main.css" rel="stylesheet" type="text/css" media="all" />

    <META NAME="Author" CONTENT="Eric Wolf, coyocanid@gmail.com">

    <STYLE>
    </STYLE>

    <script>
    $().ready(function(){
	$( '#mainpanel' ).hide();
	$.yote.init();
	var root = $.yote.fetch_root();
	var params = $.yote.util.url_params();
	var t = params['t'];
	console.log( params );
	var a = $.yote.fetch_app( params['app'] ); // TODO - what happens when this is wrong
	if( a ) {
	    $( '#body' ).empty().append( 'Please enter new password : <input type="password" id="pw"> <button type="button" id="r_b">Reset</button> <div id="msg"></div>' );
	    $.yote.util.button_actions( {
		button : '#r_b',
		texts  : [ '#pw' ],
		action : function() {
		    a.recovery_reset_password( { p : $( '#pw' ).val(), t : t } );
		}
	    } );
	}
	else {
	}
    });
    </script>
  </head>

  <BODY>
    <header>
      <h1>Yote password recovery page</h1>
    </header>
    <div id="body"></div>	   
  </body>
</html>
