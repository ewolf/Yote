<HTML>
  <HEAD>
    <TITLE>Yote System</TITLE>

    <script src="/yote/js/jquery-latest.js"></script>
    <script src="/yote/js/jquery.dumper.js"></script>
    <script src="/yote/js/jquery.cookie.js"></script>
    <script src="/yote/js/jquery.base64.min.js"></script>
    <script src="/yote/js/json2.js"></script>
    <script src="/yote/js/yote.js"></script>
    <script src="/yote/js/yote.util.js"></script>
    <script src="/yote/js/yote.system.util.js"></script>
    <link href="/css/bootstrap.css" rel="stylesheet" type="text/css" media="all" />
    <link href="/css/bootstrap-responsive.css" rel="stylesheet" type="text/css" media="all" />
    <link rel="stylesheet" href="/yote/css/jquery.mobile.css" type="text/css" media="all" />
    <link rel="stylesheet" href="/yote/css/ui-lightness/jquery-ui-1.8.23.custom.css" type="text/css" media="all" />

    <STYLE>
      section { padding-top : 20px; margin : 3px; }
    </STYLE>

    <script lang="javascript">

$().ready( function() {
    $.yote.init();

    var admin_app = $.yote.fetch_app( 'Yote::Util::Admin' );
    var cms = admin_app.get_cms();

    function make_side_menu( arry ) {
	$( '#side_menu' ).empty();
	for( var i=0; i < arry.length; i++ ) {
	    var menu_item = arry[i];
	    var m_id = "to_" + menu_item.toLowerCase().replace( " ", "_" );
	    $( '#side_menu' ).append( '<li class="active"><a href="#" id="' + m_id + '">' + menu_item + "</a></li>" );
	    (function ( item ) {
		$( '#' + item ).click( function() { eval( item + '()' ); } );
	    } )( m_id );
	}
    } //make_side_menu


    function to_accounts() {
	$( '#main_panel_div' ).empty().append( "Accounts go here " );
	
    }

    function to_installed_apps() {
	$( '#main_panel_div' ).empty().append( "Installed Apps go here " );
    }

    function to_news() {
	$( '#main_panel_div' ).empty().append( "News goes here. lets remember to talk about xpaths " );
    }

    function to_edit_news() {
	$( '#main_panel_div' ).empty().append( "<textarea id=edit_news></textarea><BR><button type=button id=edit_news_b>Apply</button>" );
	$( '#edit_news_b' ).click( function() {
	    cms.attach_content( { path : 'news', content : $( '#edit_news' ).val() } );
	    $( '#News' ).empty().append( cms.content( { path : 'news' } ) );
	} );
    }

    function on_login( login ) {
	make_side_menu( [ 'Accounts', 'Installed Apps', 'Edit News' ] );
    } //check_login_state

    function not_logged_in() {
	make_side_menu( [ 'About', 'Documentation', 'Download' ] );
	$( '#underbar' ).empty().append( '<section id="News"><P>News Goes Here, actually</P></section>' );
    }

    $.yote.util.make_login_bar( { brand_html         : '<a class="brand" href="./index.html">Yote</a>',
				  container_id       : '#nav-container',
				  logged_in_function : on_login,
				  not_logged_in_function : not_logged_in,
				  modal_div          : '#modal_div'
				} );

} );

    </script>

  </HEAD>

   <body data-spy="scroll" data-target=".side-control" data-twttr-rendered="true">

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
	<div id="nav-container" class="container" style="width: auto">
	</div>
      </div>
    </div>

    <div class="topbar">
      <div class="container hero-unit">
	<H1>Yote Admin</H1>

	<div style="position:fixed;top:350px;left:350px;" id="modal_div"></div>

      </div>
    </div>

    <div class="container">
      <div class="row">
	<div class="span2" id="menu_div">
	  <ul class="nav nav-list" id="side_menu">
	    <li class="active"><a href="#" id="to_logins">Logins</a></li>
	  </ul>
          <div id="underbar">
              <section id="News"><P>News Goes Here, actually</P></section>
	  </div>
	</div>
	
	<div class="span10" id="main_panel_div">
	  Stuff goes here!
	</div>
      </div>
    </div>

    <script src="/js/bootstrap.js"></script>

    <!-- Yote News....scratch....other things...probably want a cms too, I suppose. talk about what yote is, too -->
  </BODY>
</HTML>
